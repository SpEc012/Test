<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie and TV Show Tool</title>
    <style>
        /* CSS styles here */
    </style>
</head>
<body>
    <div class="container">
        <input type="text" id="searchInput" placeholder="Search for a movie or TV show">
        <button onclick="search()">Search</button>

        <div id="results"></div>

        <div id="seasonSelection" style="display: none;">
            <select id="seasonSelect" onchange="selectEpisode()">
                <option value="">Select a season</option>
            </select>
        </div>

        <div id="episodeSelection" style="display: none;">
            <select id="episodeSelect">
                <option value="">Select an episode</option>
            </select>
            <button onclick="watch()">Watch</button>
        </div>
    </div>

    <script>
        function search() {
            const query = document.getElementById("searchInput").value.trim();

            // Check if query is empty
            if (!query) {
                alert("Please enter a movie or TV show name.");
                return;
            }

            // Clear previous search results
            document.getElementById("results").innerHTML = "";

            // Fetch data from TMDB API
            fetch(`https://api.themoviedb.org/3/search/multi?query=${query}&api_key=YOUR_API_KEY`)
                .then(response => response.json())
                .then(data => {
                    displayResults(data.results);
                })
                .catch(error => {
                    console.error("Error searching:", error);
                });
        }

        function displayResults(results) {
            const resultsContainer = document.getElementById("results");

            if (results.length === 0) {
                resultsContainer.innerHTML = "<p>No results found.</p>";
                return;
            }

            results.forEach(item => {
                const itemDiv = document.createElement("div");
                itemDiv.classList.add("result");

                let title, overview, watchButton;

                if (item.media_type === "movie") {
                    title = `<h2>${item.title}</h2>`;
                    overview = `<p>${item.overview}</p>`;
                    watchButton = `<button onclick="watch('movie', ${item.id})">Watch</button>`;
                } else if (item.media_type === "tv") {
                    title = `<h2>${item.name}</h2>`;
                    overview = `<p>${item.overview}</p>`;
                    watchButton = `<button onclick="selectSeason(${item.id})">Watch</button>`;
                }

                itemDiv.innerHTML = title + overview + watchButton;
                resultsContainer.appendChild(itemDiv);
            });
        }

        function selectSeason(tvShowId) {
            // Fetch TV show details from TMDB API
            fetch(`https://api.themoviedb.org/3/tv/${tvShowId}?append_to_response=seasons&api_key=YOUR_API_KEY`)
                .then(response => response.json())
                .then(data => {
                    const seasons = data.seasons;
                    const seasonSelect = document.getElementById("seasonSelect");

                    // Clear previous options
                    seasonSelect.innerHTML = "";

                    // Populate season dropdown
                    seasons.forEach(season => {
                        const option = document.createElement("option");
                        option.value = season.season_number;
                        option.text = `Season ${season.season_number}`;
                        seasonSelect.appendChild(option);
                    });

                    // Show season selection
                    document.getElementById("seasonSelection").style.display = "block";
                })
                .catch(error => {
                    console.error("Error fetching TV show details:", error);
                });
        }

        function selectEpisode() {
            const tvShowId = document.getElementById("searchInput").value.trim();
            const seasonNumber = document.getElementById("seasonSelect").value;

            // Fetch episode data for the selected season
            fetch(`https://api.themoviedb.org/3/tv/${tvShowId}/season/${seasonNumber}?api_key=YOUR_API_KEY`)
                .then(response => response.json())
                .then(data => {
                    const episodes = data.episodes;
                    const episodeSelect = document.getElementById("episodeSelect");

                    // Clear previous options
                    episodeSelect.innerHTML = "";

                    // Populate episode dropdown
                    episodes.forEach(episode => {
                        const option = document.createElement("option");
                        option.value = episode.episode_number;
                        option.text = `Episode ${episode.episode_number}: ${episode.name}`;
                        episodeSelect.appendChild(option);
                    });

                    // Show episode selection
                    document.getElementById("episodeSelection").style.display = "block";
                })
                .catch(error => {
                    console.error("Error fetching episode data:", error);
                });
        }

        function watch(type, id) {
            // Redirect to watch the selected movie or TV show
            window.location.href = `https://www.themoviedb.org/${type}/${id}`;
        }
    </script>
</body>
</html>
